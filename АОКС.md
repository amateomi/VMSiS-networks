## 1. Назначение и структура сетевых адаптеров

Сетевые адаптеры - Network Interface Cards (NICs) предназначены для подключения пользовательских станций, то есть клиентских и серверных компьютеров, к КС.

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/b30045a1-c441-4c49-9540-d5c0be013c7d)

1. Блок индикации (LED)
2. Разъем для подключения к СрПД
3. Приемопередатчик
4. Сетевой контроллер
5. Блок перемычек
6. ПЗУ для хранения настроек по умолчанию
7. Гнездо для boot ROM либо boot ROM
8. Разъем для подключения к шине расширения компьютера (PCI либо другая)

## 2. Соответствие компонентов сетевых адаптеров модели OSI

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/02191804-ea41-4c37-9d0c-926f5724db21)

- AUI - Attachment Unit Interface
- MII - Medium Independent Interface
- MDI - Medium Dependent Interface
- GMII - Gigabit MII

Блок PHY (PHYsical), он же трансивер, не обязательно интегрирован в кристалл контроллера - он может быть изготовлен на основе отдельной микросхемы.

## 3. Характеристики и критерии выбора сетевых адаптеров

1. СрПД
2. Область применения: desktop, server, mobile
3. Степень интеграции: add-on, on-board
4. Управляемость: management, unmanagement
5. Режим работы: half duplex, full duplex
6. Технические характеристики: размеры буферов и так далее
7. Количество предоставляемых сетевых интерфейсов: single, dual, quad
8. Дополнительные возможности: аппаратная поддержка шифрования, сбор статистики и другое
9. Возможности энергосбережения: ACPI, WOL и другие
10. Вариант поставки: OEM, Retail

## 4. Поколения сетевых адаптеров

| Шина | Битность | Управление | Кабель |
|------|----------|------------|--------|
| XT   | 8 | перемычки | толстый коаксиальный |
| ISA | 16 | перемычки | тонкий коаксиальный |
| ISA/PCI | 16/32 | перемычки/PNP | тонкий коаксиальный/витая пара |
| PCI | 32 | PNP | витая пара (Fast Ethernet) |
| PCI/PCI-Express | 32/64 | PNP | витая пара/оптоволокно (Gigabit Ethernet) |

## 5. Назначение и классификация пассивного сетевого оборудования

Пассивное сетевое оборудование - сетевое оборудование, предназначенное не для анализа передаваемой информации, а для обеспечения требующихся технических характеристик.

Классификация:

1. Концентраторы (hubs) - работают с сигналами на физическом уровне модели OSI и тем самым осуществляют передачу принимаемых пакетов во всех направлениях
2. Повторители (repeaters) - осуществляют усиление принимаемых сигналов
3. Приемопередатчики (transceivers) - подключают к коммутаторам и маршрутизаторам посредством стандартных разъемов (AUI, MII, GBIC, SFP), осуществляют передачу пакетов в определенные СрПД и прием пакетов из них
4. Модули (modules) - оригинальные (как правило) модули маршрутизаторов и коммутаторов
5. Медиаконвертеры (mediaconverters) - осуществляют преобразование СрПД (например, из коаксиального кабеля в витую пару и наоборот)
6. Фильтры, сплиттеры и сумматоры - осуществляют выделение, подавление, разделение и объединение диапазонов частот

## 6. Назначение и классификация активного сетевого оборудования

Активное сетевое оборудование - сетевое оборудование, способное анализировать передаваемую информацию.

Классификация:

1. Коммутаторы (switches) - работают на втором уровне модели OSI и осуществляют целевую передачу принятых пакетов (кадров) в единственных правильных направлениях (в пределах сегментов)
2. Маршрутизаторы (routers) - работают на третьем уровне модели OSI и осуществляют передачу принятых пакетов в соответствии с маршрутной информацией
3. Шлюзы (gateways) - осуществляют «перенаправление» сетевых сервисов прикладного уровня

## 7. Структура коммутатора и методы коммутации

С точки зрения структуры коммутаторы делятся на:

1. На основе коммутационной матрицы (crossbar fabric) - пакеты между портами проходят по выделенным путям, проложенным через коммутационную матрицу
2. На основе разделяемой шины (bus backplane) - пакеты проходят через связывающую все порты общую высокоскоростную шину
3. На основе разделяемой памяти (shared memory) - пакеты перемещаются между портами посредством размещения в общей для всех портов памяти

Методы коммутации:

1. Store & Forward - с промежуточной буферизацией - коммутатор получает пакет полностью перед его ретрансляцией; анализируется адрес назначения и проверяется контрольная сумма
2. Cut Through - без промежуточной буферизации - коммутатор не ожидает получения пакета целиком; анализируется лишь адрес назначения
3. Fragment Free - модифицированный метод с промежуточной буферизацией - перед тем как осуществить коммутацию, коммутатор ожидает получение первых 64 байтов пакета; таким образом, если в пакете присутствует ошибка, то она почти всегда обнаруживается путем анализа этих байтов
4. Hybrid - гибридный - поочередное адаптивное применение перечисленных методов

## 8. Структура таблицы коммутатора Ethernet и ее использование

В основу работы классического коммутатора второго уровня положена таблица MAC-адресов, по-другому называемая CAM-таблицей (Content Addressable Memory). В таблице хранится соответствие MAC-адресов и портов.

При приеме юникаст-кадра некоторым портом, коммутатор связывает MAC-адрес источника с номером этого порта и заносит в таблицу (этот процесс называют изучением). При ретрансляции кадра порт для передачи определяется исходя из MAC-адреса назначения по таблице. Широковещательный кадр и кадр с еще незнакомым юникаст-MAC-адресом назначения ретранслируются всеми портами.

При ретрансляции пакетов (Smart-коммутаторами) учитываются виланы.

MAC-адреса в CAM-таблице коммутатора могут быть двух видов:
1. Динамические (dynamic) - изучаются коммутатором автоматически
2. Статические (static) - администратор «вручную» привязывает их к портам по одному или по несколько

## 9. Гибридные технологии L2-L3

Гибридные коммутаторы способны анализировать пакеты L3 уровня.

Выделяют 3 типа коммутаторов L3 уровня:

1. Маршрутизирующие коммутаторы (routing switches) - направление ретрансляции определяется на основе анализа информации, относящейся к третьему уровню в заголовке пакета; от маршрутизаторов отличаются виртуальностью сетевых интерфейсов
2. Коммутаторы потоков (flow switches) - выполняются попытки обнаружить продолжительные потоки пакетов между двумя станциями; после того, как факт наличия потока установлен на третьем уровне, дальнейшая коммутация осуществляется традиционным способом
3. Коммутирующие маршрутизаторы (switching routers) - выполняются попытки снизить расчетную нагрузку с маршрутизатора и возложить часть функций на уровень коммутации

## 10. Характеристики и критерии выбора активного сетевого оборудования

1. Область применения: workgroup - для рабочих групп, backbone (core) - магистральные
2. Тип и число физических портов: 4 (+1), 8, 12, 16, 24, 48 (другие редко)
3. Уровень модели OSI: L2, L2+, L3, L3+
4. Набор поддерживаемых протоколов маршрутизации (для L3-устройств)
5. Управляемость: unmanaged - неуправляемые, managed - управляемые (свой IP адрес, выделенная консоль RS-232, web-интерфейс, SNMP)
6. Структура: fixed - фиксированная, modular - модульная
7. Возможность масштабирования: unstackable - нестекируемые, stackable - стекируемые
8. Наличие разъемов расширений: стандартные, оригинальные
9. Технические характеристики: размеры таблиц, времена задержек и другие
10. Суммарная пропускная способность
11. Возможность автоматического определения скорости и режима (физического соединения): auto-negotiation и auto-MDI/MDIX.
12. Поддержка виртуальных ЛКС: VLANs
13. Поддержка резервирования: spanning tree, link aggregation, clusters
14. Поддержка дополнительных возможностей по обеспечению безопасности: port security и access control lists
15. Поддержка качества обслуживания: QoS

## 11. Производители сетевого оборудования различных категорий

High-end:

- Intel
- HP
- Aruba
- Cisco (множество серий коммутаторов Catalyst и маршрутизаторов)
- Nortel
- Nokia
- Juniper
- Allied Telesis
- Zyxel
- Broadcom

Low-end:

- Huawei
- D-Link
- Realtek
- Surecom

## 12. Коммутаторы Cisco

Коммутаторы Cisco делят на следующие категории:

1. Access
2. Core and distribution
3. Data center and cloud
4. Industrial Ethernet
5. Small business and LAN compact

Основу всех трех основных сегментов рынка (SOHO, SMB, Enterprise) составляют различные серии флагманских коммутаторов Catalyst. Для сегмента рынка SOHO доступны несколько серий не Catalyst-коммутаторов, которые немного дешевле, но поддерживают все основные возможности. Для центров обработки данных есть серия коммутаторов Nexus, с портами до 100 Gbit/s и low latency (системы реального времени).

Программа CCNA ориентирована в первую очередь на коммутаторы 2960 и их разновидности.

Есть модульные и немодульные, стекируеммые и нестекируеммые.

AUX-порты в коммутаторы Cisco не устанавливают. У относительно дешевых коммутаторов нет тумблеров питания.

Отдельно взятый порт отдельно взятого коммутатора Cisco имеет традиционно совмещенный двуцветный (зеленый и оранжевый) индикатор. Для переключения режима индикации используют кнопку Mode, расположенную на лицевой панели.

## 13. Cisco IOS и коммутаторы

В настоящее время наиболее актуальны следующие версии IOS для коммутаторов:

- 12.2 - для 2960, 3560, 3750 и других «современников»
- 15.X - для 2960, 2960-S, 3560-X, 3750-X, 2960-L, 1000 и других
- 16.X (IOS XE) - для 3650, 3850, 9200, 9300 и других

Коммутаторы серии 2960 поставляли со встроенным web-интерфейсом. Не Catalyst коммутаторы вовсе не имеют CLI («младшие» серии) либо имеют упрощенный CLI, называемый Textview («старшие» серии), зато имеют полноценный встроенный web-интерфейс.

IOS XE более грамоздкая по сравнению с IOS, на коммутатор её можно установить в двух режимах: install (не доступен на маршрутизаторах) и bundle

Нумерация интерфейсов на коммутаторах начинается с единицы, а не с нуля (gi0/1), как на маршрутизаторах.

## 14. Конфигурирование порта Ethernet коммутатора Cisco

Параметры Ethernet порта коммутатора по-умолчанию:

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/452b3cd9-3802-4b6a-b5bf-f75e066a2a05)

Некоторые команды:

```
Switch(config)#interface range gi0/1,gi0/11-12
Switch(config-if-range)#speed 1000
Switch(config-if-range)#duplex full
Switch(config-if-range)#mdix auto
Switch(config-if-range)#flowcontrol receive on ! Включить flow control (элемент QoS)
Switch(config-if-range)#power inline never ! Отключить PoE
Switch(config-if-range)#exit
```

## 15. Таблица коммутатора Cisco 2960

Рассказать как устроена CAM-таблица.

Для привязки статических MAC-адресов к портам используют команду mac-address-table static:

```
Switch(config)#mac-address-table static 12ab.47dd.ff89 vlan 1 interface fa0/1
```

Для просмотра CAM-таблицы используют команду show mac address-table:

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/3488e92f-2125-4754-af21-96244efcea8f)

## 16. Понятие виланов, их достоинства и недостатки

Виланы позволяют строить на базе одной физической сети некоторое количество логических, причем логические сети будут существовать независимо друг от друга, то есть переданный в одной сети пакет никогда не будет принят в другой (если дополнительно об этом не позаботиться).

Пример организации виланов:

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/8cf376cf-4897-4c05-b01c-3a39c4a269c8)

Основные достоинства виланов:

1. Использование виланов помогает контролировать трафик, в первую очередь широковещательный
2. С помощью виланов обеспечивают дополнительную защиту информации
3. Виланы лучше адаптированы к изменениям в составе сетевого оборудования

Основные недостатки виланов:

1. Необходимость наличия значительно более дорогостоящего сетевого оборудования (например, сетевые адаптеры типа server и коммутаторы не ниже уровня L2+)
2. Применение виланов приводит к увеличению вычислительной нагрузки по причине вносимых количественных и качественных дополнений

## 17. Классификации и реализации виланов

При рассмотрении виланов выделяют три группы понятий:

1. Физические порты (physical ports), то есть точки подключения сетевого оборудования (сетевых адаптеров, коммутаторов и другого)
2. Физические соединения (каналы) (links) между физическими портами
3. Виртуальные сетевые интерфейсы и подинтерфейсы (subinterfaces) сетевого оборудования

Критерии классификации виланов:

1. Порт-, интерфейс- либо канал-ориентированность: port-based, interface-based, link-based
2. Наличие тегировки пакетов: tagged, untagged
3. Наличие протокол-ориентированности (адрес-ориентированности): protocol-based
4. Уровень модели OSI: L2, L3 и другие
5. Наличие аутентификации: authentication-based
6. Постоянство членства: static, dynamic

Основные реализации виланов:

1. Собственно Port-based - членство в вилане определяется в соответствии с портами активного сетевого оборудования

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/a1b31f25-231b-4374-80dd-9d50209ad6d9)

2. 802.1Q - в кадр Ethernet вставляется специальный тег
3. Cisco ISL (Inter-Switch Link) - проприетарный протокол, аналогичный 802.1Q
4. Cisco VTP (VLAN Trunking Protocol) - проприетарный протокол, позволяющий частично автоматизировать настройку виланов

## 18. 802.1Q

802.1Q - реализация виланов на основе тегов, вставляемых в кадр Ethernet:

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/4e0fcf4f-327e-440d-9df8-6ac40d6cfeca)

1. TPID (Tag Protocol IDentifier) - идентификатор протокола тегировки (является и признаком наличия тега, для 802.1Q равно 8100h)
2. PCP (Priority Code Point) - код приоритета либо приоритет пользователя
3. DEI (Drop Eligible Indicator) - индикатор разрешения отброса кадра либо индикатор канонического формата MAC-адреса (в обычном кадре Ethernet равно нулю)
4. VID (VLAN IDentifier) - идентификатор вилана (собственно значение тега)

Классификация виланов в рамках 802.1Q:

1. Data VLAN - «рабочий» вилан - предназначен для передачи пользовательского трафика (может быть назначен любой незарезервированный VID)
2. Default VLAN - вилан по умолчанию - в данный вилан включаются все порты коммутатора по умолчанию (не может быть ни изменен, ни удален; зарезервирован VID = 1)
3. Management VLAN - административный вилан - предназначен для администрирования (выделяют исходя из соображений безопасности; от пользовательских виланов отличается только назначением)
4. Native VLAN - вилан для оригинального трафика - предназначен для передачи нетегированного трафика (по умолчанию это вилан с VID = 1; может быть назначен любой незарезервированный VID)
5. Private VLAN - приватный вилан - предназначен для частичного запрета трафика в рамках вилана (позволяет масштабировать виланы)
6. Reserved VLAN - зарезервированный вилан - предназначен для передачи специфического трафика (например, голосового; VID может быть как из зарезервированного, так и с незарезервированного диапазона

Концепция 802.1Q допускает многократную тегировку кадров (QinQ), но нужно помнить что каждый тег увеличивает кадр, а значит длина кадра может превысить значение MTU. Сетевое оборудование обрабатывает теги, находящиеся «на вершине» (наиболее близкие к началу кадра).

*Рассказать про access и trunk порты.*

## 19. Маршрутизация между виланами

Каждый вилан является сегментом сети, а значит соответсвует IP-подсети. Для взаиомдействия между разными виланами необходима маршрутизация между виланами (inter-VLAN routing).

Маршрутизация между виланами может выполняться:

1. L3-коммутатором с виртуальными сетевыми интерфейсами в разных IP-подсетях

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/a4a902cc-a63c-4703-9dac-caa96cadf5d4)

2. Маршрутизатором с относящимися к разным IP-подсетям виртуальными подинтерфейсами одного реального сетевого интерфейса (иногда называют router-on-stick)

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/cfc03b45-9c1d-4f79-a143-7589f3caab75)

3. Маршрутизатором с относящимися к разным IP-подсетям сетевыми интерфейсами (иногда называют классической маршрутизацией между виланами)

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/058ac959-6ce4-4ecb-89a2-69d09c53dfbf)

## 20. Поддержка виланов в Windows и Linux

В Windows, исключая Server 2012 - Server 2019, виланы поддерживаются только на уровне драйверов сетевых адаптеров (например, Intel). При этом необходимо конфигурационное ПО (например, утилиты) от производителей.

Подинтерфейсы как таковые не поддерживаются.

Виланы представлены виртуальными мультиплексируемыми сетевыми интерфейсами, их можно посмотреть и настроить через диспетчер устройств.

В Linux поддержка виланов выражена в подинтерфейсах. На примере eth0 - это eth0.1, eth0.2, eth0.3 и так далее. Номер подинтерфейса соответствует VID в кадре (тегированный трафик), eth0 соответствует native VLAN (нетегированный трафик). Подинтерфейсы eth0 могут сосуществовать с eth0.

В разных дистрибутивах Linux настройка сетевых интерфейсов выглядит по разному. Пример конфигурации в Debian через файл `/etc/network/interfaces`

```
auto eth1.10
iface eth1.10 inet static
  address 192.168.10.1
  netmask 255.255.255.0
  vlan_raw_device eth1
```

## 65. Интеграция компьютерных сетей в системы связи

Исторически происходила интеграция компьютерных сетей в системы связи, однако существуют и обратные технологии, подразумевающие интеграцию систем связи в компьютерные сети, например, VoIP.

Для передачи речи была установлена полоса частот 300 - 3400 Hz (4 kHz), что соответствует девяностопроцентному уровню разборчивости.

Для передачи голосовых сообщений вводится понятие канала тональной частоты (ТЧ-канал, voice channel).

В системах аналоговой связи применяют мультиплексирование с частотным разделением каналов - Frequency Division Multiplexing (FDM). Таким образом в результирующем объединенном сигнале каждый voice channel занимает полосу частот 4 kHz.

На базе voice channel формируют групповые тракты (voice groups): первичный К-12 (12 ТЧ-каналов, 60 - 180 kHz), вторичный К-6 (60 ТЧ-каналов, 312 - 552 kHz), третичный К-300 (300 ТЧ-каналов, 812 - 2044 kHz) и другие (более или менее стандартизированные).

В свою очередь цифровая связь имеет три фундаментальные отличия от аналоговой:

1. Тактирование (clocking)
2. Сигнализация (signaling)
3. Кадрообразование (framing)

Сигнализация позволяет создавать, отслеживать и удалять физические соединения. Сигнализация бывает внутридиапозонной (in-band) и внедиапазонной (out-of-band). Выделяют два типа сигнализации:

1. CCS (Common Channel Signaling) - управление всеми информационными каналами происходит через один сигнализирующий
2. CAS (Channel Associated Signaling) - для каждого информационного канала предусмотрен персональный сигнализирующий

В системах цифровой связи для преобразования аналоговых сигналов в цифровые применяют импульсно-кодовую модуляцию (ИКМ) - Pulse Code Modulation (PCM). Частота дискретизации при этом 8 kHz, разрядность - 8, а значит пропускная способность такого канала - 64 kbit/s. Таковой канал называют основным цифровым каналом - Digital Signal level 0 (DS0), на его базе построена иерархия цифровой связи.

При использовании DS0 применяется мультиплексирование с временным разделением каналов - Time Division Multiplexing (TDM).

Тайм-слот - непрерывная последовательность битов в смешанном после мультиплексирования потоке. Тайм слоты создают параллельную иерархию: DS0 соответствует TS0 и так далее.

В разных странах DS и T отличаются.

## 66. Структура и синхронизация цифровых сетевых интерфейсов

С точки зрения структуры сетевой интерфейс состоит из следующих элементов:

1. ЦАП и АЦП
2. Кодеки
3. DSUs (Data Service Units) - передатчики и приемники отдельных каналов
4. CSUs (Channel Service Units) - средства контроля целостности потоков и тестирования в каналах (обычно объединены с DSUs)
5. TDMs (Time Division Multiplexers) - мультиплексоры

![image](https://github.com/amateomi/VMSiS-networks/assets/74430714/9be5516b-5912-411e-8759-beee6f1f9258)

С точки зрения синхронизации надо учитывать два обстоятельства:

- источники синхронизации могут быть локальными и глобальными, причем в отношении как отдельных мультиплексоров, так и выделенных групп
- элементы синхронизации включаются в передаваемые кадры

Сбои в синхронизации именуют проскальзываниями (slips).

Выделяют 4 режима синхронизации передатчиков и приемников мультиплексоров в составе СПД:

1. Асинхронный - источники синхронизации не связаны между собой и относительно нестабильны (не более одного проскальзывания за 7 секунд). По факту не применяется
2. Плезиохронный - большинство источников синхронизации не связаны между собой, но они относительно стабильны (не более одного проскальзывания за 17 часов). Нашел широкое применение
3. Псевдосинхронный - все источники синхронизации высокостабильны и многие из них привязаны к одному эталонному глобальному источнику (не более одного проскальзывания за 70 суток). Вытесняет плезиохронный
4. Синхронный - все источники синхронизации привязаны к одному эталонному глобальному источнику (проскальзываний фактически нет). Недостижимый идеал

